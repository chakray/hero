{"version":3,"file":"chakray-marked.js.map","sources":["ng://@chakray/marked/marked/lib.token.ts","ng://@chakray/marked/marked/lib.model.ts","ng://@chakray/marked/marked/marked.service.ts","ng://@chakray/marked/marked/marked.lib.ts","ng://@chakray/marked/marked/marked.tag.ts","ng://@chakray/marked/marked/enroute.attr.ts","ng://@chakray/marked/marked/marked.mod.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\nimport { MdLib } from './lib';\n\nexport function mockMdLib() {\n  return new MdLib();\n}\n\nexport const mdLib = new InjectionToken<MdLib>('cm-mdlib', {\n  providedIn: 'root',\n  factory: mockMdLib\n});\n","/**\n * common wrapper interface for markdown parser libraries\n */\nexport class MdLib {\n  constructor() {}\n  /**\n   * @param str markdown string\n   * @return html string\n   */\n  parse(str): string {\n    return 'default markedown parser - ' + str;\n  }\n}\n","import { Inject, Injectable, InjectionToken } from '@angular/core';\nimport { MdLib, mdLib } from './lib';\n\n@Injectable({ providedIn: 'root' })\nexport class MarkedService {\n  constructor(@Inject(mdLib) lib: MdLib) { }\n}\n","import { MdLib } from './lib';\n\n/**\n * wrapper for [marked.js](https://github.com/markedjs/marked)\n * see [[MdLib]] for common apis\n */\nexport class MarkedLib extends MdLib {\n  /**\n   * @param lib marked lib\n   */\n  constructor(private lib) {\n    super();\n  }\n\n  /**\n   * @param str markdown string\n   * @return html string\n   */\n  parse(str: string): string {\n    return this.lib(str);\n  }\n}\n","import { HostBinding, Input, Component, Inject } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\n\nimport { MdLib, mdLib } from './lib';\n\n/**\n * <cm-marked str='*markdown*'>\n */\n@Component({\n  selector: 'cm-marked',\n  templateUrl: './marked.tag.html',\n  styleUrls: ['./marked.tag.sass']\n})\nexport class CmMarkedTag {\n  @Input() baseUrl = '';\n  /**\n   * str for set markdown string\n   */\n  @Input() set str(v) {\n    this._str = v;\n    const r = this.lib.parse(v);\n    this.html = this.sanitizer.bypassSecurityTrustHtml(r);\n  }\n  // @HostBinding('innerHtml')\n  html: SafeHtml;\n  private _str = '';\n  /**\n   * @param sanitizer see external DomSanitizer\n   * @param lib see [[MdLib]]\n   */\n  constructor(private sanitizer: DomSanitizer,\n              @Inject(mdLib) private lib: MdLib) { }\n}\n","import { Input, Directive, ElementRef, HostListener } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Directive({\n  selector: '[cmEnroute]'\n})\nexport class CmEnrouteAttr {\n  @Input('cmEnroute') baseUrl = '';\n  constructor(private el: ElementRef, private router: Router) { }\n  @HostListener('click', ['$event'])\n  public onClick(event) {\n    const attr = event.target.getAttribute('href') || '';\n    const m = attr.split('#');\n    let href = m[0];\n    const fragment = m[1];\n    if (href.startsWith('http')) { return; }\n    if (href.includes('..')) {\n      const meg = href.split('/');\n      const n = meg.reduce((r, k) => {\n        return k === '..' ? r + 1 : r;\n      }, 0);\n      let seg = this.baseUrl.split('/');\n      seg = seg.slice(0, seg.length - n);\n      meg.splice(0, n);\n      href = seg.join('/') + '/' + meg.join('/');\n    } else {\n      href = this.baseUrl + '/' + href;\n    }\n    if (event.target.tagName === 'A') {\n      if (href) {\n        this.router.navigate([href], { fragment });\n      } else {\n        this.router.navigate([], { fragment });\n      }\n      event.preventDefault();\n    } else {\n      return;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\n\nimport { CmEnrouteAttr } from './enroute.attr';\nimport { CmMarkedTag } from './marked.tag';\n\n/**\n * this module exports [[CmMarkedTag]] for template use\n */\n@NgModule({\n  declarations: [\n    CmEnrouteAttr,\n    CmMarkedTag],\n  imports: [\n    RouterModule\n  ],\n  exports: [\n    RouterModule,\n    CmMarkedTag]\n})\nexport class CmMarkedMod { }\n"],"names":["mockMdLib","mdLib","tslib_1.__extends"],"mappings":"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"}
